data:text/html,<!doctype html>
<title>Keymaps</title>
<style>
.rowpin { border: 2px solid green; }
.colpin { border: 2px solid blue; }
.error { border: 2px solid red; }
</style>
<table>
<tr id=rowpins>
  <td>Row pins:</td>
  <td><input class=rowpin size=1 value=0></td>
  <td><input class=rowpin size=1 value=1></td>
  <td><input class=rowpin size=1 value=2></td>
  <td><input class=rowpin size=1 value=3></td>
  <td><input class=rowpin size=1 value=4></td>
  <td><input class=rowpin size=1 value=5></td>
</tr>
<tr id=colpins>
  <td>Column pins:</td>
  <td><input class=colpin size=1 value=16></td>
  <td><input class=colpin size=1 value=17></td>
  <td><input class=colpin size=1 value=18></td>
  <td><input class=colpin size=1 value=19></td>
  <td><input class=colpin size=1 value=20></td>
  <td><input class=colpin size=1 value=21></td>
</tr>
</table>
<table id=pinmap>
  <tr>
    <td>left pinky</td>
    <td>left ring</td>
    <td>left middle</td>
    <td>left index</td>
    <td>left thumb</td>
    <td>right thumb</td>
    <td>right index</td>
    <td>right middle</td>
    <td>right ring</td>
    <td>right pinky</td>
  </tr>
  <!--
  et aoinsh rdlcum wfgypb vkjxqz ; space backspace enter shift mode
  0123456789`-=[]\',./ up down left right shift ctrl mode tab volup voldn macro
  -->
  <tr>
    <td>
      <input class=rowpin size=1 value=0>
      <input class=colpin size=1 value=16>
      <input size=1 value='z'>
      <input size=1 value=''>
    </td>
    <td>
      <input class=rowpin size=1 value=0>
      <input class=colpin size=1 value=17>
      <input size=1 value=''>
      <input size=1 value=''>
    </td>
    <td>
      <input class=rowpin size=1 value=0>
      <input class=colpin size=1 value=18>
      <input size=1 value=''>
      <input size=1 value=''>
    </td>
    <td>
      <input class=rowpin size=1 value=0>
      <input class=colpin size=1 value=19>
      <input size=1 value=''>
      <input size=1 value=''>
    </td>
    <td>
      <input class=rowpin size=1 value=0>
      <input class=colpin size=1 value=20>
      <input size=1 value='BACKSPACE'>
      <input size=1 value=''>
    </td>
    <td>
      <input class=rowpin size=1 value=3>
      <input class=colpin size=1 value=20>
      <input size=1 value='ENTER'>
      <input size=1 value=''>
    </td>
    <td>
      <input class=rowpin size=1 value=3>
      <input class=colpin size=1 value=19>
      <input size=1 value=''>
      <input size=1 value=''>
    </td>
    <td>
      <input class=rowpin size=1 value=3>
      <input class=colpin size=1 value=18>
      <input size=1 value=''>
      <input size=1 value=''>
    </td>
    <td>
      <input class=rowpin size=1 value=3>
      <input class=colpin size=1 value=17>
      <input size=1 value=''>
      <input size=1 value=''>
    </td>
    <td>
      <input class=rowpin size=1 value=3>
      <input class=colpin size=1 value=16>
      <input size=1 value='q'>
      <input size=1 value=''>
    </td>
  </tr>
  <tr>
    <td>
      <input class=rowpin size=1 value=1>
      <input class=colpin size=1 value=16>
      <input size=1 value='x'>
      <input size=1 value=''>
    </td>
    <td>
      <input class=rowpin size=1 value=1>
      <input class=colpin size=1 value=17>
      <input size=1 value=''>
      <input size=1 value=''>
    </td>
    <td>
      <input class=rowpin size=1 value=1>
      <input class=colpin size=1 value=18>
      <input size=1 value=''>
      <input size=1 value=''>
    </td>
    <td>
      <input class=rowpin size=1 value=1>
      <input class=colpin size=1 value=19>
      <input size=1 value=''>
      <input size=1 value=''>
    </td>
    <td>
      <input class=rowpin size=1 value=1>
      <input class=colpin size=1 value=20>
      <input size=1 value='SHIFT'>
      <input size=1 value=''>
    </td>
    <td>
      <input class=rowpin size=1 value=4>
      <input class=colpin size=1 value=20>
      <input size=1 value='MODE'>
      <input size=1 value='MODE'>
    </td>
    <td>
      <input class=rowpin size=1 value=4>
      <input class=colpin size=1 value=19>
      <input size=1 value=''>
      <input size=1 value=''>
    </td>
    <td>
      <input class=rowpin size=1 value=4>
      <input class=colpin size=1 value=18>
      <input size=1 value=''>
      <input size=1 value=''>
    </td>
    <td>
      <input class=rowpin size=1 value=4>
      <input class=colpin size=1 value=17>
      <input size=1 value=''>
      <input size=1 value=''>
    </td>
    <td>
      <input class=rowpin size=1 value=4>
      <input class=colpin size=1 value=16>
      <input size=1 value='v'>
      <input size=1 value=''>
    </td>
  </tr>
  <tr>
    <td>
      <input class=rowpin size=1 value=2>
      <input class=colpin size=1 value=16>
      <input size=1 value='k'>
      <input size=1 value=''>
    </td>
    <td>
      <input class=rowpin size=1 value=2>
      <input class=colpin size=1 value=17>
      <input size=1 value=''>
      <input size=1 value=''>
    </td>
    <td>
      <input class=rowpin size=1 value=2>
      <input class=colpin size=1 value=18>
      <input size=1 value=''>
      <input size=1 value=''>
    </td>
    <td>
      <input class=rowpin size=1 value=2>
      <input class=colpin size=1 value=19>
      <input size=1 value=''>
      <input size=1 value=''>
    </td>
    <td>
      <input class=rowpin size=1 value=2>
      <input class=colpin size=1 value=20>
      <input size=1 value='e'>
      <input size=1 value=''>
    </td>
    <td>
      <input class=rowpin size=1 value=5>
      <input class=colpin size=1 value=20>
      <input size=1 value='t'>
      <input size=1 value=''>
    </td>
    <td>
      <input class=rowpin size=1 value=5>
      <input class=colpin size=1 value=19>
      <input size=1 value=''>
      <input size=1 value=''>
    </td>
    <td>
      <input class=rowpin size=1 value=5>
      <input class=colpin size=1 value=18>
      <input size=1 value=''>
      <input size=1 value=''>
    </td>
    <td>
      <input class=rowpin size=1 value=5>
      <input class=colpin size=1 value=17>
      <input size=1 value=''>
      <input size=1 value=''>
    </td>
    <td>
      <input class=rowpin size=1 value=5>
      <input class=colpin size=1 value=16>
      <input size=1 value='j'>
      <input size=1 value=''>
    </td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>
      <input class=rowpin size=1 value=0>
      <input class=colpin size=1 value=21>
      <input size=1 value='SEMICOLON'>
      <input size=1 value=''>
    </td>
    <td>
      <input class=rowpin size=1 value=3>
      <input class=colpin size=1 value=21>
      <input size=1 value='SPACE'>
      <input size=1 value=''>
    </td>
  </tr>
</table>
<textarea id=keymaps cols=100 rows=10></textarea>
<script>
function qSA(s, p) {
  return Array.prototype.slice.apply((p || document).querySelectorAll(s));
}
function buildkeymaps() {
  var rowpinnums = [];
  var colpinnums = [];
  qSA('input', rowpins).forEach(function(input) {
    rowpinnums.push(input.value);
  });
  qSA('input', colpins).forEach(function(input) {
    colpinnums.push(input.value);
  });
  var keymapkeys = [[[], [], [], [], [], []], [[], [], [], [], [], []]];
  var hadError = false;
  qSA('td', pinmap).forEach(function(td) {
    var inputs = td.querySelectorAll('input');
    if (inputs.length === 0) return;
    var rowpin = inputs[0].value;
    var colpin = inputs[1].value;
    var key0 = inputs[2].value;
    var key1 = inputs[3].value;
    var rowpini = rowpinnums.indexOf(rowpin);
    var colpini = colpinnums.indexOf(colpin);
    inputs[0].className = (rowpini < 0) ? 'error' : 'rowpin';
    inputs[1].className = (colpini < 0) ? 'error' : 'colpin';
    inputs[2].className = key0 ? '' : 'error';
    inputs[3].className = key1 ? '' : 'error';
    hadError = hadError || (rowpini < 0) || (colpini < 0) || !key0 || !key1;
    keymapkeys[0][rowpini][colpini] = key0;
    keymapkeys[1][rowpini][colpini] = key1;
  });
  if (hadError)
    return;
  keymaps.value = '{' + keymapkeys.map(function(keymap) {
    return keymap.map(function(row) {
      return row.map(function(key) {
        return (key.length === 1) ? ("'" + key + "'") : ('KEY_' + key);
      }).join(', ');
    }).join(', ');
  }).join('},\n{') + '}';
}
qSA('input').forEach(function(input) {
  input.addEventListener('keyup', buildkeymaps);
});
buildkeymaps();
</script>
